<div class="dashboard">

  <!-- Sidebar -->
  <aside class="sidebar">
    <h2 class="logo">EduManage</h2>
    <ul class="menu">
      <li (click)="activeTab='overview'" [class.active]="activeTab==='overview'">Dashboard</li>
      <li (click)="activeTab='batches'" [class.active]="activeTab==='batches'">My Batches</li>
      <li (click)="activeTab='attendance'" [class.active]="activeTab==='attendance'">Attendance</li>
      <li (click)="activeTab='tasks'" [class.active]="activeTab==='tasks'">Tasks</li>
      <li (click)="activeTab='reports'" [class.active]="activeTab==='reports'">Reports</li>
    </ul>
  </aside>

  <!-- Main Content -->
  <div class="main">

    <!-- Header -->
    <header class="header">
      <h2>Trainer Dashboard</h2>
      <div class="user-info">
        <span>👩‍🏫 Trainer</span>
        <button class="logout-btn">Logout</button>
      </div>
    </header>

    <!-- Overview Section -->
    <section *ngIf="activeTab==='overview'" class="overview">
      <div class="card">
        <h3>Today’s Batches</h3>
        <p>{{ todayBatches.length }}</p>
      </div>
      <div class="card">
        <h3>Attendance Pending</h3>
        <p>{{ pendingAttendance }}</p>
      </div>
      <div class="card">
        <h3>Tasks to Grade</h3>
        <p>{{ pendingTasks }}</p>
      </div>
    </section>

    <!-- Batches -->
    <section *ngIf="activeTab==='batches'" class="content">
      <h3>My Batches</h3>
      <table>
        <thead>
          <tr>
            <th>Batch Name</th>
            <th>Timing</th>
            <th>Students</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let batch of todayBatches">
            <td>{{ batch.name }}</td>
            <td>{{ batch.time }}</td>
            <td>{{ batch.students.length }}</td>
          </tr>
        </tbody>
      </table>
    </section>

    <!-- Attendance -->
    <section *ngIf="activeTab==='attendance'" class="content">
      <h3>Mark Attendance</h3>
      <select [(ngModel)]="selectedBatch" class="dropdown">
        <option *ngFor="let batch of todayBatches" [value]="batch.name">{{ batch.name }}</option>
      </select>

      <div *ngIf="selectedBatch">
        <table>
          <thead>
            <tr>
              <th>Student</th>
              <th>Present</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let student of getStudentsForBatch(selectedBatch)">
              <td>{{ student }}</td>
              <td><input type="checkbox" [(ngModel)]="attendance[student]" /></td>
            </tr>
          </tbody>
        </table>
        <button class="btn green" (click)="saveAttendance()">Save Attendance</button>
      </div>
    </section>

    <!-- Tasks -->
    <section *ngIf="activeTab==='tasks'" class="content">
      <h3>Assign Task</h3>
      <select [(ngModel)]="taskBatch" class="dropdown">
        <option *ngFor="let batch of todayBatches" [value]="batch.name">{{ batch.name }}</option>
      </select>

      <textarea [(ngModel)]="newTask" placeholder="Enter task details..." class="task-box"></textarea>
      <button class="btn blue" (click)="assignTask()">Assign Task</button>

      <h3 class="mt">Pending Submissions</h3>
      <ul class="task-list">
        <li *ngFor="let task of pendingTaskList">{{ task.student }} - {{ task.title }}</li>
      </ul>
    </section>

    <!-- Reports -->
    <section *ngIf="activeTab==='reports'" class="content">
      <h3>Reports</h3>
      <p>📊 Attendance & Task reports with export options will be shown here.</p>
    </section>

  </div>
</div>
