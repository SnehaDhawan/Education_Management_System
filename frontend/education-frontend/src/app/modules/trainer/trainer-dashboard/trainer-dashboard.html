<div class="dashboard">
  <aside class="sidebar">
    <h2 class="logo">EduManage</h2>
    <ul class="menu">
      <li (click)="activeTab='overview'" [class.active]="activeTab==='overview'">Dashboard</li>
      <li (click)="activeTab='batches'" [class.active]="activeTab==='batches'">My Batches</li>
      <li (click)="activeTab='attendance'" [class.active]="activeTab==='attendance'">Attendance</li>
      <li (click)="activeTab='tasks'" [class.active]="activeTab==='tasks'">Tasks</li>
      <li (click)="activeTab='reports'" [class.active]="activeTab==='reports'">Reports</li>
    </ul>
  </aside>

  <div class="main">
    <header class="header">
      <h2>Trainer Dashboard</h2>
      <div class="user-info">
        <span>👩‍🏫 {{ trainerName || 'Trainer'}}</span>
        <button (click)="logout()" class="logout-btn">Logout</button>
      </div>
    </header>


    <section *ngIf="activeTab==='overview'" class="overview">
      <div class="card">
        <h3>Today’s Batches</h3>
        <p>{{ batches.length }}</p>
      </div>
      <div class="card">
        <h3>Attendance Pending</h3>
        <p>{{ pendingAttendance }}</p>
      </div>
      <div class="card">
        <h3>Tasks to Grade</h3>
        <p>{{ pendingTasks }}</p>
      </div>
    </section>


    <section *ngIf="activeTab==='batches'" class="content">
      <h3>My Batches</h3>
      <table>
        <thead>
          <tr>
            <th>Batch Name</th>
            <th>Timing</th>
            <th>Batch Count</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let batch of batches">
            <td>{{ batch.batchName }}</td>
            <td>{{ batch.schedule}}</td>
            <td>30</td>
          </tr>
        </tbody>
      </table>
    </section>

    <!-- <section *ngIf="activeTab==='tasks'" class="content">
      <h3>Assign Task</h3>
      <select [(ngModel)]="taskBatch" class="dropdown">
        <option value="" disabled>Select Batch</option>
        <option *ngFor="let batch of todayBatches" [value]="batch.name">{{ batch.name }}</option>
      </select>

      <div *ngIf="taskBatch">
        <textarea [(ngModel)]="newTask" placeholder="Enter task details..." class="task-box"></textarea>
        <button class="btn blue" (click)="assignTask()">Assign Task</button>

        <h4>Students in {{ taskBatch }}</h4>
        <ul>
          <li *ngFor="let student of getStudentsForBatch(taskBatch)">
            {{ student }}
          </li>
        </ul>

        <h3 class="mt">Pending Tasks</h3>
        <ul class="task-list">
          <li *ngFor="let task of pendingTaskList">{{ task.student }} - {{ task.title }}</li>
        </ul>
      </div>
    </section> -->


    <div *ngIf="activeTab==='attendance'">
       <app-attendance  [trainerId]="trainerId" [batchId]="trainer.batchId"></app-attendance>
    </div>


    <section *ngIf="activeTab==='reports'" class="content">
      <h3>Reports</h3>
      <p>📊 Attendance & Task reports with export options will be shown here.</p>
    </section>

  </div>
</div>